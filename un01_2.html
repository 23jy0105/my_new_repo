<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>予約フォーム（結果）</title>
    <link rel="stylesheet" href="./css/search.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <nav class="nav">
                <ul class="nav-menu-left" id="nav-menu-left">
                    <li><a href="./index.html" style="font-size: 26px; font-weight: bold; margin-left: 50px;">千景</a></li>
                </ul>
                <ul class="nav-menu-right" id="nav-menu-right">
                    <li><a href="./un01_1.html" style="font-weight: bold; margin-right: 50px;">宿泊予約</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main>
        <div style="margin: 20px 40px;">
        <h1>宿泊予約</h1>
        <div class="form-container">
            <div class="form-select-top">
                <div class="form-row">
                    <label for="stay-days">宿泊日数</label>
                    <select id="stay-days" name="stay-days">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>
                <div class="form-row">
                    <label for="people-count">人数</label>
                    <select id="people-count" name="people-count">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>
                <div class="form-row">
                    <label for="room-count">部屋数</label>
                    <select id="room-count" name="room-count">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>
                <button type="button" id="search-button" class="button">検索</button>

            </div>
            <div class="form-select-bottom">
                <div class="form-row">
                    <div class="radio-group">
                        <input type="radio" id="date-not-specified" name="date" value="not-specified" checked>
                        <label for="date-not-specified" id="date-select">日付未定</label>
                        <input type="radio" id="date-specified" name="date" value="specified">
                        <label for="date-specified" id="date-select">日付を指定する</label>
                        <div id="stay-start">(宿泊開始日)</div>
                        <input type="date" id="date-picker" name="date-picker" disabled>                       
                    </div>

                </div>
                <div class="form-row">
                    <select id="sort-options" name="sort-options">
                        <option value="default">並び替え</option>
                        <option value="price-asc">価格の安い順</option>
                        <option value="price-desc">価格の高い順</option>
                    </select>
                </div>
            </div>
        </div>
        <br>
    <h2>検索結果：10件</h2>
    <div class="result">
        <div class="result-item">
            <div class="result-image"><img src="./img/room1.jpg"width="100px"height="100px"alt="プラン画像1"></div>
            <div class="result-details">
                <h2>基本プラン</h2>
                <h3>概要</h3>
                <p>料金	￥19,800～</p>
                <p>朝食・夕食ありのプランです。一品一品丁寧にお作りしたお料理をご提供しております。</p>
            </div>
            <div class="result-buttons">
                <button class="details-button">詳細</button>
                <button id="reserve-button">予約</button>
            </div>
        </div>
        <div class="result-item">
            <div class="result-image"><img src="./img/DXroom.png"width="100px"height="100px"alt="プラン画像1"></div>
            <div class="result-details">
                <h2>デラックスプラン</h2>
                <h3>概要</h3>
                <p>料金	￥24,900～</p>
                <p>ワンランク上の贅沢な滞在をお求めの方に――<br>
                    特別なお部屋とお食事で、心に残る至福のひとときをお届けします。</p>
            </div>
            <div class="result-buttons">
                <button class="details-button">詳細</button>
                <button id="reserve-button">予約</button>
            </div>
        </div>
    </div>
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>プラン詳細</h2>
            <p>ここにプランの詳細情報が表示されます。</p>
            <p>例えば、料金や追加情報を含むことができます。</p>
        </div>
    </div>

    <div id="calendar-container">
        <div class="nav-buttons">
            <button id="prev">◀ 前の月</button>
            <h2 id="current-month"></h2>
            <button id="next">次の月 ▶</button>
        </div>
        <div id="calendar"></div>
        <button id="close-calendar">閉じる</button>        
    </div></div>
    </main>
    <script>
        let currentYear = new Date().getFullYear();
        let currentMonth = new Date().getMonth();

        function createCalendar(year, month) {
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        const firstDay = new Date(year, month, 1).getDay();
        const calendar = document.createElement("table");
        calendar.innerHTML = "<tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr>";
        
        let row = document.createElement("tr");
        for (let i = 0; i < firstDay; i++) {
            row.appendChild(document.createElement("td"));
        }
        
        for (let day = 1; day <= daysInMonth; day++) {
            const cell = document.createElement("td");
            
            // Create a link for the day
            const link = document.createElement("a");
            link.href = `#`;  // 例えば、"2025-2-5"のように日付をリンクにする
            link.textContent = day;
            link.addEventListener("click", (event) => {
            event.preventDefault();  // デフォルトのリンク動作を防ぐ

                const selectedDate = `${year}-${month + 1}-${day}`;  // YYYY-MM-DD 形式
                window.location.href = `un02_1.html?date=${selectedDate}`;
            });

            cell.appendChild(link);
            
            row.appendChild(cell);
            
            if ((firstDay + day) % 7 === 0) {
                calendar.appendChild(row);
                row = document.createElement("tr");
            }
        }
        
        if (row.children.length > 0) {
            calendar.appendChild(row);
        }
        
        return calendar;
        }

        function updateCalendar() {
            const container = document.getElementById("calendar");
            container.innerHTML = "";
            document.getElementById("current-month").textContent = `${currentYear}年 ${currentMonth + 1}月`;
            container.appendChild(createCalendar(currentYear, currentMonth));
        }
        document.querySelectorAll("#reserve-button").forEach(button => {button.addEventListener("click", () => {
            document.getElementById("calendar-container").style.display = "block";
            updateCalendar();
        });
    });

        document.getElementById("close-calendar").addEventListener("click", () => {
            document.getElementById("calendar-container").style.display = "none";
        });

        document.getElementById("prev").addEventListener("click", () => {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            updateCalendar();
        });

        document.getElementById("next").addEventListener("click", () => {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            updateCalendar();
        });
        const dateNotSpecified = document.getElementById('date-not-specified');
        const dateSpecified = document.getElementById('date-specified');
        const datePicker = document.getElementById('date-picker');
        const dateStart = document.getElementById('stay-start');

        dateNotSpecified.addEventListener('change', () => {
            datePicker.disabled = true;
            datePicker.style.visibility = "hidden";
            dateStart.style.visibility = "hidden";
        });

        dateSpecified.addEventListener('change', () => {
            datePicker.disabled = false;
            datePicker.style.visibility = "visible";
            dateStart.style.visibility = "visible";
        });
        const modal = document.getElementById("myModal");
        const closeButton = document.getElementsByClassName("close")[0];
        const detailsButtons = document.querySelectorAll(".details-button");

        detailsButtons.forEach(button => {
            button.addEventListener("click", () => {
                modal.style.display = "block";
            });
        });

        // 閉じるボタンをクリックしたときにモーダルを閉じる
        closeButton.addEventListener("click", () => {
            modal.style.display = "none";
        });

        // モーダル外の部分をクリックするとモーダルを閉じる
        window.addEventListener("click", (event) => {
            if (event.target === modal) {
                modal.style.display = "none";
            }
        });
        document.querySelectorAll("#reserve-button").forEach(button => {
        button.addEventListener("click", () => {
            const stayDays = document.getElementById("stay-days").value;
            const peopleCount = document.getElementById("people-count").value;
            const roomCount = document.getElementById("room-count").value;
            localStorage.setItem("stayDays",stayDays);
            localStorage.setItem("peopleCount", peopleCount);
            localStorage.setItem("roomCount", roomCount);

            });
        });
    </script>
</body>

</html>